# etcd3 Configuration for Patroni RAFT mode
# Generated by Ansible - DO NOT EDIT MANUALLY

# Node name
ETCD_NAME={{ inventory_hostname }}

# Data directory
ETCD_DATA_DIR={{ postgres_data_dir }}/etcd

# Listen addresses
ETCD_LISTEN_CLIENT_URLS=http://127.0.0.1:2379
ETCD_LISTEN_PEER_URLS=http://{{ ansible_host }}:2380

# Advertise addresses
ETCD_ADVERTISE_CLIENT_URLS=http://127.0.0.1:2379
ETCD_INITIAL_ADVERTISE_PEER_URLS=http://{{ ansible_host }}:2380

# Initial cluster
ETCD_INITIAL_CLUSTER={% for host in groups['db_postgres'] %}{{ host }}={{ 'http://' + hostvars[host].ansible_host + ':2380' }}{% if not loop.last %},{% endif %}{% endfor %}

# Cluster state
ETCD_INITIAL_CLUSTER_STATE=new
ETCD_INITIAL_CLUSTER_TOKEN=keybuzz-pg17-etcd-cluster

# Heartbeat and election timeouts
ETCD_HEARTBEAT_INTERVAL=250
ETCD_ELECTION_TIMEOUT=1250

