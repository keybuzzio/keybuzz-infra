# PH29.8 - PROD API Stats Compatibility Layer

**Date**: 2026-02-05
**Status**: DEPLOYED

## Objectif

Exposer les routes legacy /stats/* pour compatibilite avec le client GOLDEN.

## Routes implementees

| Endpoint | Status | Mappe vers |
|----------|--------|------------|
| GET /stats/dashboard | 200 | Logique dashboard/summary |
| GET /stats/sla | 200 | Extraction SLA |
| GET /stats/conversations | 200 | Extraction conversations |

## Image deployee

- **Tag**: api-prod-stats-compat-2026-02-05a
- **Digest**: sha256:1aa540aff908cd5c0d2cdc3c04cd401e933790155be3500e5ea3137d58eb5d4c
- **Commit GitOps**: f8665d6

## Rollback pointer

Image precedente: ghcr.io/keybuzzio/keybuzz-api:api-prod-full-2026-02-05a

## Validation curl (APRES)

/health: 200
/stats/dashboard?tenantId=ecomlg-001: 200
/stats/sla?tenantId=ecomlg-001: 200
/stats/conversations?tenantId=ecomlg-001: 200

## Format de reponse /stats/dashboard

{
  " source\: \api\,
 \tenantId\: \ecomlg-001\,
 \timestamp\: \...\,
 \conversations\: { \total\, \open\, \pending\, \resolved\, \resolved24h\, \resolved7d\ },
 \sla\: { \ok\, \atRisk\, \breached\ },
 \orders\: { \total\, \pending\, \shipped\, \delivered\, \delayed\, \inTransit\ },
 \messages24h\: 0,
 \channels\: [],
 \recentActivity\: []
}

## Format de reponse /stats/conversations

{
 \source\: \api\,
 \tenantId\: \ecomlg-001\,
 \timestamp\: \...\,
 \conversations\: { \total\, \open\, \pending\, \resolved\ }
}

## Format de reponse /stats/sla

{
 \source\: \api\,
 \tenantId\: \ecomlg-001\,
 \timestamp\: \...\,
 \sla\: { \ok\, \atRisk\, \breached\, \total\ }
}

## Module cree

/root/keybuzz-api/src/modules/stats/routes.ts

## Client GOLDEN inchange

Le client PROD reste sur menu-fr-ph28.26-2026-02-03 (GOLDEN)
