# PH29.10D - Fix NEXT_PUBLIC_API_BASE_URL (split-brain API URLs)

**Date**: 2026-02-05
**Status**: DEPLOYED (DEV + PROD)

## Probleme resolu

Le code client utilisait deux variables differentes pour l'URL API :
- NEXT_PUBLIC_API_URL (Dashboard) - defini au build
- NEXT_PUBLIC_API_BASE_URL (Messages/Conversations) - NON defini

Resultat : Dashboard appelait api.keybuzz.io, Messages appelait api-dev.keybuzz.io (fallback)

## Solution

Ajout de NEXT_PUBLIC_API_BASE_URL au Dockerfile et aux build args.

## Images deployees

### DEV
- **Tag**: dev-client-api-baseurl-fix-2026-02-05a
- **Digest**: sha256:b0b9433fe25336295b930f68a5d526dae43a395e4f49af3284e902143ccd669c
- **Build args**:
  - NEXT_PUBLIC_API_URL=https://api-dev.keybuzz.io
  - NEXT_PUBLIC_API_BASE_URL=https://api-dev.keybuzz.io

### PROD
- **Tag**: prod-client-api-baseurl-fix-2026-02-05a
- **Digest**: sha256:b98e89a565d0f14988607e4ba619d50b2c83f8caac12168ef0d2d85862bd56af
- **Build args**:
  - NEXT_PUBLIC_API_URL=https://api.keybuzz.io
  - NEXT_PUBLIC_API_BASE_URL=https://api.keybuzz.io

## Commits GitOps

- DEV: 208ac12
- PROD: 5178ab8 [PROD-APPROVED]

## /debug/version PROD

`json
{
   app: app,
  version: 0.5.10-channels-polish,
  gitSha: 4229048,
  buildDate: 2026-02-05T20:47:55.727818Z
}
`

## Rollback

PROD rollback = repointer sur menu-fr-ph28.26-2026-02-03
digest sha256:886e5d36bbe2069736556e981958c1bdfa4566f11aaafa31749449426cf7ad22

## Validation requise

Sur client.keybuzz.io (navigation privee) :
- Dashboard : plus API indisponible
- Messages : plus Stats API indisponible
- Canaux : features inchangees
- Aide IA : champ contexte present
