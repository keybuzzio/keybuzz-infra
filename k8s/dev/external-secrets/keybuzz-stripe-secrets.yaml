apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: keybuzz-stripe-secrets
  namespace: keybuzz-api-dev
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  target:
    name: keybuzz-stripe
    creationPolicy: Owner
  data:
    - secretKey: STRIPE_SECRET_KEY
      remoteRef:
        key: secret/keybuzz/stripe
        property: secret_key
    - secretKey: STRIPE_WEBHOOK_SECRET
      remoteRef:
        key: secret/keybuzz/stripe
        property: webhook_secret
    - secretKey: STRIPE_PRICE_STARTER_MONTHLY
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_starter_monthly
    - secretKey: STRIPE_PRICE_STARTER_ANNUAL
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_starter_annual
    - secretKey: STRIPE_PRICE_PRO_MONTHLY
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_pro_monthly
    - secretKey: STRIPE_PRICE_PRO_ANNUAL
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_pro_annual
    - secretKey: STRIPE_PRICE_AUTOPILOT_MONTHLY
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_autopilot_monthly
    - secretKey: STRIPE_PRICE_AUTOPILOT_ANNUAL
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_autopilot_annual
    - secretKey: STRIPE_PRICE_ADDON_CHANNEL_MONTHLY
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_addon_channel_monthly
    - secretKey: STRIPE_PRICE_ADDON_CHANNEL_ANNUAL
      remoteRef:
        key: secret/keybuzz/stripe
        property: price_addon_channel_annual
    - secretKey: API_BASE_URL
      remoteRef:
        key: secret/keybuzz/stripe
        property: api_base_url
    - secretKey: APP_BASE_URL
      remoteRef:
        key: secret/keybuzz/stripe
        property: app_base_url
